# قابلیت‌های پیشرفته GraphRAG

## مقدمه

این پروژه شامل قابلیت‌های پیشرفته جدید برای سیستم GraphRAG است که بر اساس الگوریتم‌های جدید و روش‌های استخراج توکن پیشرفته طراحی شده است.

## قابلیت‌های جدید

### 1. روش‌های استخراج توکن

#### 1.1 بر اساس LLM
- استفاده از مدل‌های زبانی برای استخراج هوشمند توکن‌ها
- تحلیل معنایی سوال و استخراج موجودیت‌ها
- تشخیص نوع پاسخ بر اساس محتوای سوال

#### 1.2 بر اساس قوانین
- استفاده از الگوهای از پیش تعریف شده
- تشخیص ژن‌ها، بیماری‌ها و داروها
- قوانین ساده و سریع برای استخراج توکن

#### 1.3 ترکیبی
- ترکیب روش‌های LLM و قوانین
- بهینه‌سازی نتایج با ترکیب چندین روش
- انعطاف‌پذیری بالا در انتخاب روش

#### 1.4 معنایی
- استخراج توکن بر اساس شباهت معنایی
- استفاده از مدل‌های embedding
- تشخیص موجودیت‌ها بر اساس محتوای معنایی

### 2. الگوریتم‌های بازیابی جدید

#### 2.1 BFS (جستجوی سطح اول)
- جستجو در سطح‌های مختلف گراف
- یافتن نودهای مرتبط در عمق مشخص
- مناسب برای جستجوهای گسترده

#### 2.2 DFS (جستجوی عمیق اول)
- جستجو در عمق گراف
- یافتن مسیرهای طولانی
- مناسب برای تحلیل روابط پیچیده

#### 2.3 PageRank
- رتبه‌بندی نودها بر اساس اهمیت
- استفاده از الگوریتم PageRank
- تشخیص نودهای کلیدی در گراف

#### 2.4 تشخیص جامعه
- تشخیص گروه‌های مرتبط در گراف
- استفاده از الگوریتم‌های مختلف:
  - **Louvain**: الگوریتم سریع و کارآمد
  - **Label Propagation**: انتشار برچسب
  - **Girvan-Newman**: تشخیص جامعه بر اساس مرکزیت
  - **Spectral**: روش طیفی

#### 2.5 شباهت معنایی
- بازیابی بر اساس شباهت معنایی
- استفاده از مدل‌های embedding
- تطبیق سوال با موجودیت‌های گراف

#### 2.6 N-Hop
- بازیابی مسیرهای چندمرحله‌ای
- یافتن روابط غیرمستقیم
- تحلیل مسیرهای پیچیده

#### 2.7 ترکیبی
- ترکیب چندین الگوریتم
- بهینه‌سازی نتایج
- انعطاف‌پذیری بالا

### 3. تنظیمات پیشرفته

#### 3.1 پارامترهای بازیابی
- **حداکثر عمق**: عمق جستجو در گراف (1-10)
- **حداکثر نودها**: تعداد نودهای بازیابی شده (1-100)
- **حداکثر یال‌ها**: تعداد یال‌های بازیابی شده (1-200)
- **آستانه شباهت**: حداقل شباهت برای فیلتر کردن نتایج (0-1)

#### 3.2 پارامترهای PageRank
- **ضریب damping**: پارامتر PageRank (0.1-0.9)
- **تعداد تکرار**: تعداد تکرار الگوریتم

#### 3.3 پارامترهای تشخیص جامعه
- **دقت تشخیص**: پارامتر resolution (0.1-2.0)
- **حداقل اندازه جامعه**: حداقل تعداد نود در جامعه

### 4. رابط کاربری پیشرفته

#### 4.1 انتخاب سرویس
- انتخاب بین سرویس معمولی و پیشرفته
- نمایش تنظیمات مربوط به هر سرویس

#### 4.2 تنظیمات پیشرفته
- تنظیمات مخصوص سرویس پیشرفته
- انتخاب روش‌های مختلف
- تنظیم پارامترهای الگوریتم‌ها

#### 4.3 نمایش نتایج پیشرفته
- تحلیل سوال
- نمایش نودها با جزئیات بیشتر
- نمایش جامعه‌ها
- نمایش شباهت‌ها
- نمایش مسیرهای پیشرفته

### 5. API های جدید

#### 5.1 پردازش پیشرفته
```
POST /api/enhanced_process_query
```

**پارامترها:**
- `query`: سوال کاربر
- `token_extraction_method`: روش استخراج توکن
- `retrieval_algorithm`: الگوریتم بازیابی
- `community_detection_method`: روش تشخیص جامعه
- `max_depth`: حداکثر عمق
- `max_nodes`: حداکثر نودها
- `max_edges`: حداکثر یال‌ها
- `similarity_threshold`: آستانه شباهت

#### 5.2 تنظیمات پیشرفته
```
GET /api/enhanced_config
POST /api/enhanced_config
```

#### 5.3 اطلاعات گراف پیشرفته
```
GET /api/enhanced_graph_info
```

#### 5.4 روش‌های مختلف
```
GET /api/token_extraction_methods
GET /api/retrieval_algorithms
GET /api/community_detection_methods
```

## نحوه استفاده

### 1. فعال‌سازی سرویس پیشرفته
1. در صفحه اصلی، گزینه "استفاده از سرویس پیشرفته GraphRAG" را فعال کنید
2. تنظیمات پیشرفته نمایش داده می‌شود
3. روش‌های مختلف را انتخاب کنید

### 2. تنظیم پارامترها
1. روش استخراج توکن را انتخاب کنید
2. الگوریتم بازیابی را انتخاب کنید
3. پارامترهای مربوطه را تنظیم کنید

### 3. پردازش سوال
1. سوال خود را وارد کنید
2. دکمه "پردازش سوال" را کلیک کنید
3. نتایج پیشرفته نمایش داده می‌شود

## مزایای قابلیت‌های جدید

### 1. دقت بالاتر
- استفاده از الگوریتم‌های پیشرفته
- تحلیل معنایی بهتر
- تشخیص دقیق‌تر موجودیت‌ها

### 2. انعطاف‌پذیری
- انتخاب روش‌های مختلف
- تنظیم پارامترها
- تطبیق با نیازهای مختلف

### 3. کارایی بهتر
- الگوریتم‌های بهینه‌شده
- کش کردن نتایج
- پردازش سریع‌تر

### 4. قابلیت تحلیل پیشرفته
- تشخیص جامعه‌ها
- تحلیل مسیرهای پیچیده
- شباهت معنایی

## مثال‌های استفاده

### مثال 1: جستجوی ژن‌ها
```
سوال: "What genes are associated with diabetes?"
روش استخراج توکن: LLM-based
الگوریتم بازیابی: Hybrid
```

### مثال 2: تحلیل روابط پیچیده
```
سوال: "How do drugs affect gene expression in heart tissue?"
روش استخراج توکن: Semantic
الگوریتم بازیابی: N-Hop
```

### مثال 3: تشخیص جامعه‌ها
```
سوال: "What biological pathways are involved in cancer?"
روش استخراج توکن: Hybrid
الگوریتم بازیابی: Community Detection
```

## نکات مهم

1. **انتخاب روش مناسب**: هر روش برای نوع خاصی از سوالات مناسب است
2. **تنظیم پارامترها**: پارامترها را بر اساس نیاز تنظیم کنید
3. **تست و ارزیابی**: نتایج مختلف را مقایسه کنید
4. **بهینه‌سازی**: بر اساس نتایج، تنظیمات را بهینه کنید

## پشتیبانی

برای سوالات و مشکلات:
- بررسی مستندات
- تست با مثال‌های مختلف
- تنظیم پارامترها
- مقایسه نتایج

## آینده

قابلیت‌های آینده:
- الگوریتم‌های جدید
- مدل‌های پیشرفته‌تر
- رابط کاربری بهتر
- تحلیل‌های عمیق‌تر 